<!DOCTYPE html>
<html lang="ko">
<head>
	<meta charset="UTF-8">
	<meta name="viewport" content="width=device-width, initial-scale=1.0">
	<meta http-equiv="X-UA-Compatible" content="ie=edge">
	<link rel="stylesheet" href="/project/register.css">
	<title>회원 가입</title>
</head>
<body>
	<div id="container">
		<h1>회원 가입</h1>
		<form action="#" id="register">
			<ul id="user-info">
				<li>
					<label for="user-id" class="field">아이디</label>
					<input type="text" id="user_id" placeholder="4~15자리의 영문과 숫자로 입력" required >
				</li>
				<li>
					<label for="user-pw1" class="field">비밀번호</label>
					<input type="password" id="user_pw1" placeholder="8자리 이상" required>
				</li>
				<li>
					<label for="user-pw2" class="field">비밀번호 확인</label>
					<input type="password" id="user_pw2" required>
				</li>
			</ul>
			<ul id="buttons">
				<li>
					<button type="button" class="btn btnBlack" onclick="store()">가입하기</button>					
				</li>
				<li>
					<button type="button" class="btn btnGray" onclick="window.open('login.html', '_blank, left=300, top=300, width=500, height=300')">닫기</button>
				</li>
			</ul>
		</form>
	</div>
	<script>
		function store(){
			var user = document.getElementById('user_id');
			var pass = document.getElementById('user_pw1');
			var pass2 = document.getElementById('user_pw2');


			var regType1 = /^[A-Za-z0-9+]{4,15}$/;		//id
			var regType2 = /[a-zA-Z0-9]{8,}/;		//pass
			var regType3 = /[a-zA-Z0-9]+/;

			var rere = true;

			while(rere == true){
				if(!regType3.test(user.value)){
					alert("영문과 숫자로만 입력");
					user.focus();
					return;
				}
				if(!regType1.test(user.value)){
					alert("4~15자리의 영문과 숫자로 입력");
					user.focus();
					return;
				}
				if(!regType2.test(pass.value)){
					alert("8자리 이상");
					pass.focus();
					return;
				}
				if(pass.value != pass2.value){
					alert("암호가 다릅니다. 다시 입력해주세요.");
					pass.focus();
					return;
				}
				var val = localStorage.getItem(user.value);
				if(val == null){
					alert(user.value + '님 가입을 환영합니다.');
					localStorage.setItem(user.value, pass.value);
					user.value = '';
					pass.value = '';
					pass2.value = '';
				}else{
					alert(user.value + '은(는) 이미 존재하는 회원입니다.');
					user.focus();
					user.value = '';
					pass.value = '';
					pass2.value = '';
					return;
				}
				rere = false;
			}
			window.close();
		}
	</script>
</body>
</html>