
<!DOCTYPE html>
<html lang="ko">
<style>
	h3, h4 { display: inline;}
</style>
<head>
<meta charset = "UTF-8">
<title> 객체 </title>
<script>
		var menu = ['중국집', '돈가스', '맛고을', '버거킹', '3일소고기', '다이어트', '막걸리 파전'];
		var classMate = ['강석진','구본학','김다나','방지환','안도훈','양원범','오민영','오승화','이규원',
						'이동원','이옥득','이현우','임규옥','임찬빈','정준오','정현수','조성헌','한수진',
						'현승환','홍석진'];
		// 팀 객체 
		var objTeam = {};
		
		// 학생 메뉴 랜덤 할당(메뉴 인덱스로).
		var listMate = [];
		var cnt = {};
		var i = 0;
		while(true){
			if(classMate.length ==listMate.length){
				break;
			}
			var menuNum = Math.floor(Math.random() * menu.length);
			if(cnt[menuNum] == undefined){
				cnt[menuNum] = 1;
				listMate.push(menuNum);  //메뉴 할당
			}else if(4 > cnt[menuNum] && cnt[menuNum] > 0){
				cnt[menuNum] +=1;
				listMate.push(menuNum);  //메뉴 할당
			}else if(cnt[menuNum] > 3){
				continue;
			}
		}
		console.log(menu.length);		// menu 즉 배열의 길이는 0인덱스부터 6까지 해서 길이가 7이라 listMate에 넣은 값도 0~6이 아닌 1~7로 넣었음.

		
		// 메뉴만큼 포문
		for(var i = 0 ; i < menu.length ; i ++){
			//메뉴 수 만큼 팀 만듬
			arrayMenu = [];
			// 학생 수 만큼 포문
			for(var j = 0 ; j < listMate.length; j++){
				// 학생에 대한 메뉴 할당과 포문 이번 차례 메뉴 인덱스가 같으면 
				// 이번 포문 메뉴를 할당 받은 학생이므로 배열에 담음

				if(listMate[j] ==i){		/// listMate[j] 는 위에서 메뉴 1 - 7만큼 넣어 놓은값임. 그게 여기서 i와 같은 것들만 뽑아내는 것.
						arrayMenu[arrayMenu.length] = classMate[j];
				}
			}
			//해당 포문의 메뉴 이름으로 배열 담는다. 
			objTeam[menu[i]] = arrayMenu;
		}
		document.write("<h1>오늘의 점심메뉴 팀(feat.코로나) </h1><hr><br>");
		for(var i = 0 ; i < Object.keys(objTeam).length ; i ++){
			document.write("<h3>" + menu[i] + "팀은 :</h3><h4>" + objTeam[menu[i]] + "</h4><br>");
		}
		document.write("<button onclick='location.reload();'>다시 추첨</button>");
</script>
</head>
<body>
</body>
</html>